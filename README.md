# Auc-ScanData.lua

This project converts is about reverse engineering the scan data generated by the [Auctioneer add-on](https://www.curseforge.com/wow/addons/auctioneer/files/427823) for World of Warcraft classic.

## Setup

If you don't have lua, first install it. 

```bash
brew install lua
```

Then install luarocks to manage your dependencies. 

```bash
brew install luarocks
```

Use luarocks to install dkjson.

```bash
luarocks install dkjson
```

## Your first `.lua` script

Getting started is as easy as this

```bash
echo 'print("Hello World!")' > hello.lua 
lua hello.lua
```

## Getting the data

Find `Auc-Scandata.lua` in your `World of warcraft/_classic_/WTF/Account/<ACCOUNTNAME>/SavedVariables` folder. 

## Conversion `.lua` to `.json`

To convert the `.lua` to `.json` we slightly modify the original `.lua` file with the following changes.

```lua
local json = require("dkjson")

...

local AucScanDataJson = json.encode(AucScanData, {indent=true})
print(AucScanDataJson)
```

We use some bash magic to do so

```bash
sed '1s;^;local json = require("dkjson");' Auc-ScanData.lua > ConvertScript.lua
echo "local AucScanDataJson = json.encode(AucScanData, {indent=true})" >> ConvertScript.lua
echo "print(AucScanDataJson)" >> ConvertScript.lua
```

Then we can run it with 

```bash
lua ConvertScript.lua > Auc-ScanData.json
```
